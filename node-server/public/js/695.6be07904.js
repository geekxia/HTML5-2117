"use strict";(self["webpackChunkvue_webapp"]=self["webpackChunkvue_webapp"]||[]).push([[695],{3695:function(t,n,e){e.r(n),e.d(n,{default:function(){return m}});var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"cart"},[e("CartNavbar"),e("NotData",{attrs:{show:t.show}}),t._l(t.list,(function(n,i){return e("van-swipe-cell",{key:n._id,scopedSlots:t._u([{key:"right",fn:function(){return[e("van-button",{staticClass:"del",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.rowDelete(n,i)}}})]},proxy:!0}],null,!0)},[e("van-row",{attrs:{type:"flex",align:"center"}},[e("van-col",{attrs:{span:"3"}},[e("van-checkbox",{on:{click:t.rowClick},model:{value:n.checked,callback:function(e){t.$set(n,"checked",e)},expression:"row.checked"}})],1),e("van-col",{attrs:{span:"21"}},[e("van-card",{staticClass:"goods-card",attrs:{num:n.num,price:t._f("rmb")(n&&n.good_info.price),desc:n&&n.good_info.desc,title:n&&n.good_info.name,thumb:n&&t.$cdn+n.good_info.img},scopedSlots:t._u([{key:"footer",fn:function(){return[e("van-button",{attrs:{size:"mini"},on:{click:function(e){return t.rowUpdate(n,i,-1)}}},[t._v(" - ")]),e("van-button",{attrs:{size:"mini"},on:{click:function(e){return t.rowUpdate(n,i,1)}}},[t._v(" + ")])]},proxy:!0}],null,!0)})],1)],1)],1)})),e("van-submit-bar",{attrs:{price:t.total,"button-text":"提交订单"},on:{submit:t.submit},scopedSlots:t._u([{key:"tip",fn:function(){return[t._v(" 你的收货地址不支持同城送, "),e("span",{staticStyle:{color:"blue"}},[t._v("修改地址")])]},proxy:!0}])},[e("van-checkbox",{on:{click:t.fullClick},model:{value:t.full,callback:function(n){t.full=n},expression:"full"}},[t._v("全选")])],1)],2)},o=[],s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("van-nav-bar",{attrs:{title:"购物车","right-text":"筛选","left-arrow":""},on:{"click-left":function(n){return t.$router.back()}},scopedSlots:t._u([{key:"right",fn:function(){return[e("img",{staticClass:"home",attrs:{src:"/icon/index.png"},on:{click:function(n){return t.$router.replace("/home")}}})]},proxy:!0}])})},r=[],a={},c=a,l=e(1001),u=(0,l.Z)(c,s,r,!1,null,"5d75add0",null),f=u.exports,h=e(2682),d={name:"CartPage",components:{CartNavbar:f,NotData:h.s8},data(){return{list:[],full:!1,show:!1}},computed:{total(){let t=0;return this.list.forEach((n=>{n.checked&&(t+=n.num*n.good_info.price)})),100*t}},mounted(){this.init()},methods:{init(){this.$http.fetchCartList().then((t=>{console.log("购物车列表",t),t&&(this.list=t.list,0===this.list.length&&(this.show=!0),this.isFull())}))},isFull(){const t=this.list.filter((t=>t.checked));this.full=t.length>0&&t.length===this.list.length},rowClick(){this.isFull()},fullClick(){this.list.forEach(((t,n)=>{this.list[n].checked=this.full})),this.list=JSON.parse(JSON.stringify(this.list))},rowDelete(t,n){this.$dialog.confirm({title:"警告",message:`你确定要删除 ${t.good_info.name} 吗？`}).then((()=>{this.$http.fetchCartDel(t._id).then((t=>{t&&(this.list.splice(n,1),this.isFull(),0===this.list.length&&(this.show=!0))}))}))},rowUpdate(t,n,e){const i={cart_id:t._id,new_num:t.num+e};if(i.new_num<=0)return this.$toast("商品数量不能小于1");this.$http.fetchCartUpd(i).then((t=>{t&&(this.list[n].num=i.new_num)}))},submit(){console.log("提交购物车");let t="";if(this.list.forEach((n=>{n.checked&&(t+=`;${n._id}`)})),!t)return this.$toast("请选择要提交的商品");this.$http.fetchCartSubmit(t).then((t=>{t&&this.init()}))}}},p=d,g=(0,l.Z)(p,i,o,!1,null,"1382d58e",null),m=g.exports},2682:function(t,n,e){e.d(n,{kF:function(){return _},s8:function(){return v},jJ:function(){return u}});var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("van-tabbar",{attrs:{"active-color":"#ff0000","inactive-color":"#8b8b8b",route:""}},[e("van-tabbar-item",{attrs:{to:"/home"},scopedSlots:t._u([{key:"icon",fn:function(t){return[e("img",{attrs:{src:"/icon/home"+(t.active?"-on":"")+".png"}})]}}])},[t._v(" 首页 ")]),e("van-tabbar-item",{attrs:{to:"/find"},scopedSlots:t._u([{key:"icon",fn:function(t){return[e("img",{attrs:{src:"/icon/find"+(t.active?"-on":"")+".png"}})]}}])},[t._v(" 分类 ")]),e("van-tabbar-item",{attrs:{to:"/cart"},scopedSlots:t._u([{key:"icon",fn:function(t){return[e("img",{attrs:{src:"/icon/cart"+(t.active?"-on":"")+".png"}})]}}])},[t._v(" 购物车 ")]),e("van-tabbar-item",{attrs:{to:"/user",dot:""},scopedSlots:t._u([{key:"icon",fn:function(t){return[e("img",{attrs:{src:"/icon/user"+(t.active?"-on":"")+".png"}})]}}])},[e("div",{domProps:{textContent:t._s(t.isLogin?"我的":"未登录")}})])],1)},o=[],s=e(2741),r={computed:{...(0,s.Se)("user",["isLogin"])}},a=r,c=e(1001),l=(0,c.Z)(a,i,o,!1,null,"7462a4ec",null),u=l.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.show?e("div",{staticClass:"not-data"},[e("img",{attrs:{src:t.not,alt:"暂无数据"}}),e("div",[t._v("暂无数据")])]):t._e()},h=[],d=e(4439),p={props:{show:{type:Boolean,default:!1}},data(){return{not:d}}},g=p,m=(0,c.Z)(g,f,h,!1,null,"58fc8c84",null),v=m.exports,b=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"top",on:{click:function(n){return t.$emit("back")}}},[t._t("default",(function(){return[e("img",{attrs:{src:t.top}})]}))],2)},k=[],A=e(9596),w={props:{show:{type:Boolean,default:!1}},data(){return{top:A}}},x=w,Z=(0,c.Z)(x,b,k,!1,null,"6a23a330",null),_=Z.exports},4439:function(t,n,e){t.exports=e.p+"img/not.025bd8a1.png"},9596:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABWdJREFUaEPdmm2IFWUUx88Z72qQ1oc+9AZCkkFvH0pCgoU7Z/aaKZIfQt3t1SJ70YoiLCEiI4LMpKh2e5Pe09XogyGaeXeeubAQEtaHsijFQMjsQx9Kg3Tvzj/OZWaZXe/MnZmd2bL5cvcy5/mf87vPmec5+5xhKujas2fP2TNmzFgMYD6Ai5j5wvBTXQD4lZmPhp/MvO/kyZO7Fi5c+FcRIfBkRBqNxiW+7/cAuIGZl+XRAvAJM39hWdZQtVr9OY+GjskFUq/Xr5g2bdpqIlqT13HMuP7R0dGBWq32fVbdTCB79+6dXalUQoCZWZ2ltD9BRP3NZnNgwYIFR1KOST8jruuuZuaniOiCtOKTtDsG4FnHcQbS6KSaEWPM20R0TxrBEmw2i8iqTrodQTzP2w/g2k5CZd5n5q9t256X5CMRxBiDMgPMqi0isfHG3nBddwcz35TVWZn2AD5zHGdpOx9tQYwxTxDR82UGNQntdSKyYeL400CMMXcS0XsJjrxJBJFlqJ1gvFJE3o/eHwcS7BP74pbYpBzNEmFa24Rn9Fiz2Zwf3WfGgRhjNJ00rU67tE6ybfvitEEUYed53i9ar8VobRCRdeG9MZCg7NDZSNqxNeXGTWkRAcdoaIqvTNA/MTo6Oj8sZ8ZAjDGvlVA7lcjZku4XkQf1jxaIMeZSIjpYglfdh9YGuhvzFqkd4porIodaIJ7nPQTglSJBmHnE9/0+x3E+VV3XdW+2LGsrgK6C/Txs2/ar4YzsIqJFBTr4G0Cv4zg7opqu6y5l5kEiOqtAX7tFZDEPDw/PGhkZ+bNAYS3D+0RkZztNY8wSItraYVHJFE5XV9c57HleH4AtmUbGGAP4g5l7ReTzJD1jzI0ABpn53CL8MvMtbIx5kYgeK0DwdyJSiHqoNTQ0tL6np2e9fo/+HSwwNSLSNDuvAN+b2HXdLczcN0mx3wKIsfLFdd3nAIxEQZi5y3GcJ0NfxhgtQxTm/Mn4B7BVZ8QQUVJdk+gDwFFmXiEiw6Gh67ovMPNa3/efiYJYlvU0gI2O4zwegekGsI2Z43bwNIyezsiPzHxZGuuJNgCO+L7fW6vVvowE9hIRPaLf24EEdi+LyKPhmHq9fr1lWfrMzM4Zx086I7pizcoqwMyHm82mQnwVgRhXHSSA6JCxXVm/1Ov16yqVyiCAOVljIaLjeUEOWpa1olqtfhM69TzvTQD3RoPoAELM/JZt2/eFYxqNxjW+728jorkZYY7nSa0fAohvI8/EO8x810TnnUDUHsC7juPcHYG5OoC5PC0MgFZqZX3YHxCRNyIz8QGA29s5TQOi45j5Q9u274ik6P1E9HpaEK2y8iy/t4nIx+rEGKM7dG+cw7QgwfhBEWltA8aYW4noo7Qg4fKbeUMEMMDMVSK6MslZRhCVOgCgwcx6mpnl2qQlyjIA27OMSmubAySt9Dg7Zl7O2g6YPn26FnqFX1MFcurUqZmtMt513e152wIFp1bmH1PbEo7jLA//H9FzXT3fLfSaohlZJSKbWyBBw+ZwoRTJJUphrizLmqMNolIPH6ZgRsYfPujPk/I4KNMvWTJI++OgYCOKPaDLRBAYlwzS/oBOfXc6Ms0KUyJI8pFpsBRri60/a9Dt7MsCAbBmYksurq1QSKutJJC2rbjYRk9BLbcDInJV8Px916k265QFSS24/3/rLfx1/gstuKSWWxhnx65ukBb/ZiuubattYhqmAglgtF+h+8yUvTBARAqRqh+TGiSyz5zZr3BEp/KMf6lmYl5qg4iZFwHQlkTetsRuZt4NQNsDhzotwXH3M6VWkhNtTzSbzSUA5qV88Wx/pVLZ2d3dfTxv8NFx/wAA4OzchhAHsgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=695.6be07904.js.map